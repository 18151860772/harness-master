<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>线束大师 - 汽车线束设计自动化平台</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/tools-page.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 网站锁定屏幕 -->
    <div class="lock-screen" id="lockScreen">
        <div class="lock-content">
            <div class="lock-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h2 class="lock-title">请先登录</h2>
            <p class="lock-message">需要登录后才能访问此网站</p>

            <!-- 锁定屏幕登录表单 -->
            <div class="lock-login-form">
                <div class="form-group">
                    <label>邮箱</label>
                    <input type="email" id="lockLoginEmail" placeholder="请输入邮箱">
                </div>
                <div class="form-group">
                    <label>密码</label>
                    <input type="password" id="lockLoginPassword" placeholder="请输入密码">
                </div>
                <button class="btn-primary btn-full" onclick="handleLockLogin()">
                    <i class="fas fa-sign-in-alt"></i>
                    登录
                </button>
            </div>

            <div class="lock-footer">
                <p>联系管理员: admin@harness.com</p>
            </div>
        </div>
    </div>

    <!-- 遮罩层 -->
    <div class="overlay-mask" id="overlayMask" onclick="closeAllPanels()"></div>

    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="20" cy="20" r="18" stroke="url(#logoGradient)" stroke-width="2"/>
                        <path d="M12 20h16M20 12v16" stroke="url(#logoGradient)" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="20" cy="20" r="6" stroke="url(#logoGradient)" stroke-width="2" fill="none"/>
                        <circle cx="20" cy="8" r="2" fill="#00d4ff"/>
                        <circle cx="20" cy="32" r="2" fill="#00d4ff"/>
                        <circle cx="8" cy="20" r="2" fill="#00d4ff"/>
                        <circle cx="32" cy="20" r="2" fill="#00d4ff"/>
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00d4ff"/>
                                <stop offset="100%" style="stop-color:#8b5cf6"/>
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <span class="logo-text">线束大师</span>
                <span class="logo-subtitle">Harness Master</span>
            </div>
            
            <ul class="nav-links">
                <li><a href="#home" class="active">首页</a></li>
                <li><a href="#tools">工具箱</a></li>
                <li><a href="#requirements">需求提交</a></li>
                <li><a href="#community">社区</a></li>
                <li><a href="#docs">文档</a></li>
            </ul>
            
            <div class="nav-actions">
                <!-- 语言切换 -->
                <button class="btn-icon" id="langToggle" title="切换语言" onclick="toggleLang()">
                    <i class="fas fa-globe"></i>
                </button>

                <!-- 主题切换按钮 -->
                <button class="btn-icon theme-toggle" id="themeToggle" title="切换主题">
                    <i class="fas fa-moon"></i>
                </button>

                <button class="btn-icon" title="消息通知" onclick="openSettingsAndShowNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="navNotificationBadge" style="display: none;">0</span>
                </button>

                <!-- 设置按钮 -->
                <div class="settings-wrapper">
                    <button class="btn-icon" id="settingsBtn" title="设置">
                        <i class="fas fa-cog"></i>
                    </button>
                    <!-- 设置面板 -->
                    <div class="settings-panel" id="settingsPanel">
                        <!-- 设置面板头部 -->
                        <div class="settings-panel-header">
                            <div class="header-left">
                                <button class="header-btn" onclick="closeSettingsPanel(event)" title="返回">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <span>系统设置</span>
                            </div>
                            <button class="close-btn" onclick="closeSettingsPanel(event)">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <!-- 账户信息 - 点击打开个人设置/登录 -->
                        <div class="settings-item account-item" id="accountSection" onclick="handleAccountSectionClick()">
                            <div class="account-info">
                                <div class="account-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="account-details">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <span class="account-name" id="accountName">未登录</span>
                                        <span class="login-status not-logged-in" id="loginStatus">未登录</span>
                                    </div>
                                    <span class="account-email" id="accountEmail">点击登录或注册</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <!-- 退出登录按钮 -->
                            <button class="logout-btn" id="logoutBtn" onclick="event.stopPropagation(); handleLogout()" style="display: none;">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>退出</span>
                            </button>
                        </div>

                        <!-- 账户面板 -->
                        <div class="account-panel" id="accountPanel">
                            <div class="account-panel-header">
                                <button class="back-btn" onclick="navigateBack()" style="display: none;">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <span>账户管理</span>
                            </div>

                            <!-- 登录表单 -->
                            <div id="loginForm" class="account-form">
                                <div class="form-group">
                                    <label>邮箱</label>
                                    <input type="email" id="loginEmail" placeholder="请输入邮箱">
                                </div>
                                <div class="form-group">
                                    <label>密码</label>
                                    <input type="password" id="loginPassword" placeholder="请输入密码">
                                </div>
                                <button class="btn-primary btn-full" onclick="handleLogin()">
                                    <i class="fas fa-sign-in-alt"></i>
                                    登录
                                </button>
                                <div class="form-footer">
                                    <a href="#" onclick="showRegisterForm(); return false;">注册新账户</a>
                                </div>
                            </div>

                            <!-- 注册表单 -->
                            <div id="registerForm" class="account-form" style="display: none;">
                                <div class="form-group">
                                    <label>用户名</label>
                                    <input type="text" id="regUsername" placeholder="请输入用户名">
                                </div>
                                <div class="form-group">
                                    <label>邮箱</label>
                                    <input type="email" id="regEmail" placeholder="请输入邮箱">
                                </div>
                                <div class="form-group">
                                    <label>密码</label>
                                    <input type="password" id="regPassword" placeholder="请输入密码">
                                </div>
                                <div class="form-group">
                                    <label>确认密码</label>
                                    <input type="password" id="regPasswordConfirm" placeholder="请再次输入密码">
                                </div>
                                <button class="btn-primary btn-full" onclick="handleRegister()">
                                    <i class="fas fa-user-plus"></i>
                                    注册
                                </button>
                                <div class="form-footer">
                                    <a href="#" onclick="showLoginForm(); return false;">已有账户？去登录</a>
                                </div>
                            </div>

                            <!-- 已登录状态 -->
                            <div id="loggedInPanel" class="loggedin-panel" style="display: none;">
                                <div class="user-info">
                                    <div class="user-avatar-large">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="user-details">
                                        <span class="user-name" id="userName">用户名</span>
                                        <span class="user-email" id="userEmail">email@example.com</span>
                                    </div>
                                </div>
                                <div class="user-menu">
                                    <button class="menu-item" onclick="showChangePassword()">
                                        <i class="fas fa-key"></i>
                                        <span>修改密码</span>
                                    </button>
                                    <button class="menu-item" onclick="showChangeEmail()">
                                        <i class="fas fa-envelope"></i>
                                        <span>修改邮箱</span>
                                    </button>
                                    <button class="menu-item" id="adminMenuItem" onclick="showUserManagement()" style="display: none;">
                                        <i class="fas fa-users-cog"></i>
                                        <span>用户管理</span>
                                    </button>
                                    <button class="menu-item" onclick="showNotifications()">
                                        <i class="fas fa-bell"></i>
                                        <span>消息通知</span>
                                        <span id="notificationBadge" class="menu-badge" style="display: none;">0</span>
                                    </button>
                                    <button class="menu-item" onclick="openPersonalSettingsFromAccount()">
                                        <i class="fas fa-user-cog"></i>
                                        <span>个人设置</span>
                                    </button>
                                    <button class="menu-item danger" onclick="handleLogout()">
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span>退出登录</span>
                                    </button>
                                </div>
                            </div>

                            <!-- 修改密码表单 -->
                            <div id="changePasswordForm" class="account-form" style="display: none;">
                                <div class="form-group">
                                    <label>当前密码</label>
                                    <input type="password" id="currentPassword" placeholder="请输入当前密码">
                                </div>
                                <div class="form-group">
                                    <label>新密码</label>
                                    <input type="password" id="newPassword" placeholder="请输入新密码">
                                </div>
                                <div class="form-group">
                                    <label>确认新密码</label>
                                    <input type="password" id="confirmNewPassword" placeholder="请再次输入新密码">
                                </div>
                                <button class="btn-primary btn-full" onclick="handleChangePassword()">
                                    <i class="fas fa-save"></i>
                                    保存修改
                                </button>
                            </div>

                            <!-- 用户管理面板 -->
                            <div id="userManagementPanel" class="user-management-panel" style="display: none;">
                                <div class="user-mgmt-header">
                                    <button class="back-btn" onclick="navigateBack()">
                                        <i class="fas fa-arrow-left"></i>
                                    </button>
                                    <span>用户管理</span>
                                </div>

                                <!-- 用户列表 -->
                                <div class="user-list-section">
                                    <div class="user-list-header-row">
                                        <span style="color: var(--text-secondary, #8b8b9e); font-size: 13px;">用户列表</span>
                                        <button class="btn-add-user" onclick="showAddUserForm()">
                                            <i class="fas fa-plus"></i>
                                            新增用户
                                        </button>
                                    </div>
                                    <div id="userListContainer" class="user-list-items">
                                        <!-- 用户列表将动态生成 -->
                                    </div>
                                </div>

                                <!-- 新增用户表单 -->
                                <div id="addUserForm" class="user-form-section" style="display: none;">
                                    <div class="form-title">
                                        <button class="back-btn-inline" onclick="hideAddUserForm()">
                                            <i class="fas fa-arrow-left"></i>
                                        </button>
                                        <span>新增用户</span>
                                    </div>
                                    <div class="form-field">
                                        <label>用户名</label>
                                        <input type="text" id="addUserUsername" placeholder="请输入用户名">
                                    </div>
                                    <div class="form-field">
                                        <label>邮箱</label>
                                        <input type="email" id="addUserEmail" placeholder="请输入邮箱">
                                    </div>
                                    <div class="form-field">
                                        <label>密码</label>
                                        <input type="password" id="addUserPassword" placeholder="请输入密码">
                                    </div>
                                    <div class="form-field">
                                        <label>用户角色</label>
                                        <select id="addUserRole">
                                            <option value="user">普通用户</option>
                                            <option value="admin">管理员</option>
                                        </select>
                                    </div>
                                    <div class="form-buttons">
                                        <button class="btn-cancel" onclick="hideAddUserForm()">取消</button>
                                        <button class="btn-submit" onclick="handleAddUser()">创建用户</button>
                                    </div>
                                </div>

                                <!-- 修改密码表单 -->
                                <div id="changeUserPasswordForm" class="user-form-section" style="display: none;">
                                    <div class="form-title">
                                        <button class="back-btn-inline" onclick="hideChangeUserPasswordForm()">
                                            <i class="fas fa-arrow-left"></i>
                                        </button>
                                        <span>修改密码</span>
                                    </div>
                                    <div class="form-user-info">
                                        <span id="changePasswordUserEmail" class="user-email-display"></span>
                                    </div>
                                    <div class="form-field">
                                        <label>新密码</label>
                                        <input type="password" id="newUserPassword" placeholder="请输入新密码">
                                    </div>
                                    <div class="form-field">
                                        <label>确认密码</label>
                                        <input type="password" id="confirmNewUserPassword" placeholder="请再次输入新密码">
                                    </div>
                                    <div class="form-buttons">
                                        <button class="btn-cancel" onclick="hideChangeUserPasswordForm()">取消</button>
                                        <button class="btn-submit" onclick="handleChangeUserPassword()">保存密码</button>
                                    </div>
                                </div>
                            </div>

                            <!-- 消息通知面板 -->
                            <div id="notificationsPanel" class="notifications-panel" style="display: none;">
                                <div class="notifications-header">
                                    <button class="back-btn" onclick="navigateBack()">
                                        <i class="fas fa-arrow-left"></i>
                                    </button>
                                    <span>消息通知</span>
                                    <button class="mark-all-read" onclick="markAllAsRead()">全部已读</button>
                                </div>
                                <div class="notifications-tabs">
                                    <button class="tab-btn active" data-tab="all" onclick="filterNotifications('all')">全部</button>
                                    <button class="tab-btn" data-tab="unread" onclick="filterNotifications('unread')">未读</button>
                                    <button class="tab-btn" data-tab="comment" onclick="filterNotifications('comment')">评论</button>
                                    <button class="tab-btn" data-tab="requirement" onclick="filterNotifications('requirement')">需求</button>
                                </div>
                                <div class="notifications-list" id="notificationsList">
                                    <!-- 通知列表动态生成 -->
                                </div>
                                <div class="empty-notifications" id="emptyNotifications" style="display: none;">
                                    <div class="empty-icon">
                                        <i class="fas fa-bell-slash"></i>
                                    </div>
                                    <h4>暂无消息</h4>
                                    <p>收到评论或需求时会在这里显示</p>
                                </div>
                            </div>
                        </div>

                        <div class="settings-divider"></div>

                        <!-- 主题设置 -->
                        <div class="settings-item">
                            <div class="settings-label">
                                <i class="fas fa-moon"></i>
                                <span data-i18n="theme">主题模式</span>
                            </div>
                            <div class="settings-control theme-switch">
                                <button class="theme-option active" data-theme="dark" onclick="switchTheme('dark')">
                                    <i class="fas fa-moon"></i>
                                    <span data-i18n="darkMode">暗黑</span>
                                </button>
                                <button class="theme-option" data-theme="light" onclick="switchTheme('light')">
                                    <i class="fas fa-sun"></i>
                                    <span data-i18n="lightMode">明亮</span>
                                </button>
                            </div>
                        </div>
                        <div class="settings-divider"></div>

                        <!-- 语言设置 -->
                        <div class="settings-item">
                            <div class="settings-label">
                                <i class="fas fa-language"></i>
                                <span data-i18n="language">语言</span>
                            </div>
                            <div class="settings-control lang-switch">
                                <button class="lang-option active" data-lang="zh" onclick="switchLang('zh')">
                                    <span>中文</span>
                                </button>
                                <button class="lang-option" data-lang="en" onclick="switchLang('en')">
                                    <span>English</span>
                                </button>
                            </div>
                        </div>
                        <div class="settings-divider"></div>

                        <!-- 底部退出按钮 -->
                        <div class="settings-item logout-item" id="footerLogoutSection" style="display: none;">
                            <button class="btn-logout-full" onclick="handleLogout()">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>退出登录</span>
                            </button>
                        </div>

                        <div class="settings-footer">
                            <span class="version">v2.1.0</span>
                        </div>

                        <!-- 个人设置面板 -->
                        <div id="personalSettingsPanel" class="personal-settings-panel" style="display: none;">
                            <div class="settings-panel-header">
                                <button class="back-btn" onclick="showSystemSettings()">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <span>个人设置</span>
                            </div>

                            <!-- 头像设置 -->
                            <div class="settings-section">
                                <div class="section-title">头像</div>
                                <div class="avatar-upload-section">
                                    <div class="current-avatar-display" id="currentAvatarDisplay">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="avatar-actions">
                                        <label class="btn-select-avatar" for="avatarInput">
                                            <i class="fas fa-upload"></i>
                                            选择图片
                                        </label>
                                        <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="handleAvatarChange(event)">
                                        <button class="btn-remove-avatar" onclick="removeAvatar()" id="btnRemoveAvatar" style="display: none;">
                                            <i class="fas fa-trash"></i>
                                            移除
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 基本信息设置 -->
                            <div class="settings-section">
                                <div class="section-title">基本信息</div>
                                <div class="settings-form">
                                    <div class="form-field">
                                        <label>用户名</label>
                                        <input type="text" id="settingsUsername" placeholder="请输入用户名">
                                    </div>
                                    <div class="form-field">
                                        <label>自我介绍</label>
                                        <textarea id="settingsBio" placeholder="介绍一下自己吧..." rows="3"></textarea>
                                    </div>
                                    <div class="form-field">
                                        <label>联系方式</label>
                                        <input type="text" id="settingsContact" placeholder="手机号/微信/QQ等">
                                    </div>
                                    <div class="form-buttons">
                                        <button class="btn-submit" onclick="savePersonalSettings()">
                                            <i class="fas fa-save"></i>
                                            保存设置
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn-primary" id="loginBtn" onclick="openPersonalSettings()">
                    <i class="fas fa-user"></i>
                    <span data-i18n="login">登录</span>
                </button>
            </div>
            
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- 主要内容区 -->
    <main class="main-content">
        <!-- 首页部分 -->
        <section id="home" class="hero-section">
            <div class="hero-bg">
                <!-- 粒子动画画布 -->
                <canvas id="particlesCanvas" class="particles-canvas"></canvas>
                <div class="grid-overlay"></div>
                <div class="floating-elements">
                    <div class="float-element" style="top: 20%; left: 10%; animation-delay: 0s;">
                        <svg width="60" height="60" viewBox="0 0 60 60">
                            <rect x="10" y="25" width="40" height="10" rx="2" fill="none" stroke="#00d4ff" stroke-width="1" opacity="0.5"/>
                            <circle cx="15" cy="30" r="3" fill="#00d4ff" opacity="0.5"/>
                            <circle cx="45" cy="30" r="3" fill="#8b5cf6" opacity="0.5"/>
                        </svg>
                    </div>
                    <div class="float-element" style="top: 60%; right: 15%; animation-delay: 1s;">
                        <svg width="80" height="80" viewBox="0 0 80 80">
                            <circle cx="40" cy="40" r="30" fill="none" stroke="#8b5cf6" stroke-width="1" opacity="0.3"/>
                            <circle cx="40" cy="40" r="20" fill="none" stroke="#00d4ff" stroke-width="1" opacity="0.4"/>
                            <circle cx="40" cy="40" r="10" fill="none" stroke="#00d4ff" stroke-width="1" opacity="0.5"/>
                        </svg>
                    </div>
                    <div class="float-element" style="top: 40%; right: 30%; animation-delay: 2s;">
                        <svg width="40" height="40" viewBox="0 0 40 40">
                            <polygon points="20,2 25,15 40,15 28,24 33,40 20,30 7,40 12,24 0,15 15,15" fill="none" stroke="#10b981" stroke-width="1" opacity="0.4"/>
                        </svg>
                    </div>
                </div>
                <!-- 光晕效果 -->
                <div class="glow-orb glow-orb-1"></div>
                <div class="glow-orb glow-orb-2"></div>
            </div>
            
            <div class="hero-content">
                <div class="hero-badge">
                    <span class="badge-dot"></span>
                    <span>AI驱动的线束设计平台 v2.0</span>
                </div>
                <h1 class="hero-title">
                    汽车线束设计
                    <span class="gradient-text">自动化专家</span>
                </h1>
                <p class="hero-description">
                    集成先进的AI算法，为您提供智能化的线束设计、分析和优化解决方案。
                    支持多种格式导入，自动化生成设计文档，大幅提升设计效率。
                </p>
                
                <div class="hero-actions">
                    <button class="btn-primary btn-large" onclick="scrollToSection('tools')">
                        <i class="fas fa-rocket"></i>
                        开始使用
                    </button>
                    <button class="btn-secondary btn-large" onclick="scrollToSection('docs')">
                        <i class="fas fa-book"></i>
                        查看文档
                    </button>
                </div>
                
                <div class="hero-stats">
                    <div class="stat-item" data-count="15000" data-suffix="">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <span class="stat-number" data-count="15000">0</span>
                        <span class="stat-label">活跃用户</span>
                    </div>
                    <div class="stat-item" data-count="50000" data-suffix="+">
                        <div class="stat-icon">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                        <span class="stat-number" data-count="50000">0</span>
                        <span class="stat-label">设计项目</span>
                    </div>
                    <div class="stat-item" data-count="99" data-suffix="%">
                        <div class="stat-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <span class="stat-number" data-count="99">0</span>
                        <span class="stat-label">效率提升</span>
                    </div>
                    <div class="stat-item" data-count="24" data-suffix="/7">
                        <div class="stat-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <span class="stat-number" data-count="24">0</span>
                        <span class="stat-label">技术支持</span>
                    </div>
                </div>
            </div>
            
            <div class="hero-visual">
                <div class="code-window">
                    <div class="window-header">
                        <div class="window-controls">
                            <span class="control close"></span>
                            <span class="control minimize"></span>
                            <span class="control maximize"></span>
                        </div>
                        <span class="window-title">harness_design.ts</span>
                    </div>
                    <div class="window-content">
                        <pre><code><span class="keyword">import</span> { HarnessDesigner } <span class="keyword">from</span> <span class="string">'@harness/core'</span>;

<span class="keyword">const</span> designer = <span class="keyword">new</span> <span class="class-name">HarnessDesigner</span>({
  voltage: <span class="number">12</span>,
  current: <span class="number">20</span>,
  standards: [<span class="string">'ISO 6722'</span>, <span class="string">'LV 214'</span>]
});

<span class="keyword">const</span> result = <span class="keyword">await</span> designer.autoGenerate({
  components: loadComponents(<span class="string">'layout.json'</span>),
  optimize: <span class="boolean">true</span>,
  exportFormat: <span class="string">'CAD'</span>
});

<span class="comment">// 线束设计完成，生成报告</span>
<span class="class-name">ReportGenerator</span>.generate(result, { format: <span class="string">'PDF'</span> });</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- 工具箱部分 -->
        <section id="tools" class="tools-section">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-cube"></i>
                    <span>20+ 专业工具</span>
                </div>
                <h2 class="section-title">
                    <i class="fas fa-tools"></i>
                    专业工具箱
                </h2>
                <p class="section-description">
                    集成多种专业线束设计工具，同时支持自定义扩展
                    <a href="tools.html" class="link">
                        <i class="fas fa-external-link-alt"></i>
                        查看全部 21 个工具
                    </a>
                </p>
            </div>
            
            <!-- 快速工具入口 -->
            <div class="quick-tools-bar">
                <a href="tools.html" class="quick-tool-link">
                    <i class="fas fa-th-large"></i>
                    <span>工具箱首页</span>
                    <small>查看所有工具</small>
                </a>
                <a href="tools.html#analysis" class="quick-tool-link">
                    <i class="fas fa-chart-pie"></i>
                    <span>分析工具</span>
                    <small>数据分析和处理</small>
                </a>
                <a href="tools.html#comparison" class="quick-tool-link">
                    <i class="fas fa-balance-scale"></i>
                    <span>对比工具</span>
                    <small>文件对比和分析</small>
                </a>
                <a href="tools.html#generation" class="quick-tool-link">
                    <i class="fas fa-magic"></i>
                    <span>生成工具</span>
                    <small>自动化生成</small>
                </a>
            </div>
            
            <div class="tools-grid">
                <div class="tool-card" data-tool="wire-calculator">
                    <div class="tool-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3 class="tool-name">线径计算器</h3>
                    <p class="tool-description">根据电流、电压和温度自动计算最优线径规格</p>
                    <div class="tool-tags">
                        <span class="tag">基础工具</span>
                        <span class="tag">常用</span>
                    </div>
                    <button class="btn-tool" onclick="openTool('wire-calculator')">
                        <i class="fas fa-play"></i>
                        启动工具
                    </button>
                </div>
                
                <div class="tool-card" data-tool="connector-selector">
                    <div class="tool-icon">
                        <i class="fas fa-plug"></i>
                    </div>
                    <h3 class="tool-name">连接器选型</h3>
                    <p class="tool-description">智能匹配连接器，支持多品牌型号对比</p>
                    <div class="tool-tags">
                        <span class="tag">选型工具</span>
                        <span class="tag">智能</span>
                    </div>
                    <button class="btn-tool" onclick="openTool('connector-selector')">
                        <i class="fas fa-play"></i>
                        启动工具
                    </button>
                </div>
                
                <div class="tool-card" data-tool="bom-generator">
                    <div class="tool-icon">
                        <i class="fas fa-list"></i>
                    </div>
                    <h3 class="tool-name">BOM生成器</h3>
                    <p class="tool-description">自动生成物料清单，支持多格式导出</p>
                    <div class="tool-tags">
                        <span class="tag">生产</span>
                        <span class="tag">导出</span>
                    </div>
                    <button class="btn-tool" onclick="openTool('bom-generator')">
                        <i class="fas fa-play"></i>
                        启动工具
                    </button>
                </div>
                
                <div class="tool-card" data-tool="schematic-viewer">
                    <div class="tool-icon">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <h3 class="tool-name">原理图查看器</h3>
                    <p class="tool-description">在线查看和编辑线束原理图</p>
                    <div class="tool-tags">
                        <span class="tag">设计</span>
                        <span class="tag">可视化</span>
                    </div>
                    <button class="btn-tool" onclick="openTool('schematic-viewer')">
                        <i class="fas fa-play"></i>
                        启动工具
                    </button>
                </div>
                
                <div class="tool-card custom-tool" data-tool="custom">
                    <div class="tool-icon add-icon">
                        <i class="fas fa-plus"></i>
                    </div>
                    <h3 class="tool-name">自定义工具</h3>
                    <p class="tool-description">上传您自己的HTML工具，扩展平台功能</p>
                    <div class="tool-tags">
                        <span class="tag">扩展</span>
                        <span class="tag">自定义</span>
                    </div>
                    <button class="btn-tool" onclick="openTool('custom')">
                        <i class="fas fa-upload"></i>
                        上传工具
                    </button>
                </div>
                
                <div class="tool-card" data-tool="simulation">
                    <div class="tool-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <h3 class="tool-name">仿真分析</h3>
                    <p class="tool-description">电气性能仿真和热分析</p>
                    <div class="tool-tags">
                        <span class="tag">仿真</span>
                        <span class="tag">分析</span>
                    </div>
                    <button class="btn-tool" onclick="openTool('simulation')">
                        <i class="fas fa-play"></i>
                        启动工具
                    </button>
                </div>
            </div>
            
            <!-- 工具嵌入区域 -->
            <div class="tool-workspace" id="toolWorkspace">
                <div class="workspace-header">
                    <div class="workspace-title">
                        <i class="fas fa-th-large"></i>
                        <span id="currentToolName">工具工作区</span>
                    </div>
                    <div class="workspace-actions">
                        <button class="btn-icon" onclick="toggleFullscreen()">
                            <i class="fas fa-expand"></i>
                        </button>
                        <button class="btn-icon" onclick="closeTool()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="workspace-content" id="toolContent">
                    <!-- 工具内容将动态加载 -->
                    <div class="placeholder-content">
                        <i class="fas fa-magic"></i>
                        <p>选择一个工具开始使用</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 需求提交部分 -->
        <section id="requirements" class="requirements-section">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-magic"></i>
                    <span>定制服务</span>
                </div>
                <h2 class="section-title">
                    <i class="fas fa-lightbulb"></i>
                    自动化开发需求
                </h2>
                <p class="section-description">
                    提交您的线束设计需求，我们将为您定制自动化解决方案
                </p>
            </div>
            
            <div class="requirements-container">
                <div class="requirements-form-card">
                    <div class="form-header">
                        <h3>需求提交</h3>
                        <div class="form-steps">
                            <span class="step active" data-step="1">1. 基本信息</span>
                            <span class="step" data-step="2">2. 技术参数</span>
                            <span class="step" data-step="3">3. 确认提交</span>
                        </div>
                    </div>
                    
                    <form class="requirements-form" id="requirementsForm">
                        <div class="form-step active" id="step1">
                            <div class="form-group">
                                <label for="projectName">项目名称 <span class="required">*</span></label>
                                <input type="text" id="projectName" name="projectName" placeholder="请输入项目名称" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="projectType">项目类型 <span class="required">*</span></label>
                                    <select id="projectType" name="projectType" required>
                                        <option value="">请选择项目类型</option>
                                        <option value="new_design">新线束设计</option>
                                        <option value="optimization">现有优化</option>
                                        <option value="migration">旧版迁移</option>
                                        <option value="custom">自定义需求</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="priority">优先级 <span class="required">*</span></label>
                                    <select id="priority" name="priority" required>
                                        <option value="">请选择优先级</option>
                                        <option value="high">高 - 紧急项目</option>
                                        <option value="medium">中 - 标准项目</option>
                                        <option value="low">低 - 常规优化</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="description">项目描述 <span class="required">*</span></label>
                                <textarea id="description" name="description" rows="4" placeholder="详细描述您的线束设计需求..." required></textarea>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn-primary" onclick="nextStep(2)">
                                    下一步
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-step" id="step2">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="voltage">电压等级</label>
                                    <select id="voltage" name="voltage">
                                        <option value="">请选择电压等级</option>
                                        <option value="12v">12V 低压</option>
                                        <option value="24v">24V 低压</option>
                                        <option value="48v">48V 轻混</option>
                                        <option value="400v">400V 高压</option>
                                        <option value="800v">800V 高压</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="environment">使用环境</label>
                                    <select id="environment" name="environment">
                                        <option value="">请选择使用环境</option>
                                        <option value="engine">发动机舱</option>
                                        <option value="cabin">驾驶室</option>
                                        <option value="chassis">底盘</option>
                                        <option value="door">车门</option>
                                        <option value="trunk">后备箱</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="standards">适用标准</label>
                                    <div class="checkbox-group">
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="standards" value="ISO 6722">
                                            <span class="checkmark"></span>
                                            ISO 6722
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="standards" value="LV 214">
                                            <span class="checkmark"></span>
                                            LV 214
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="standards" value="LV 215">
                                            <span class="checkmark"></span>
                                            LV 215
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="standards" value="VW 60330">
                                            <span class="checkmark"></span>
                                            VW 60330
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="files">相关文件上传</label>
                                <div class="file-upload-area" id="fileUploadArea">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>拖拽文件到此处或 <span class="upload-link">点击上传</span></p>
                                    <span class="file-hint">支持 PDF, DWG, DXF, CSV 格式</span>
                                    <input type="file" id="fileInput" name="files" multiple accept=".pdf,.dwg,.dxf,.csv">
                                </div>
                                <div class="file-list" id="fileList"></div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="prevStep(1)">
                                    <i class="fas fa-arrow-left"></i>
                                    上一步
                                </button>
                                <button type="button" class="btn-primary" onclick="nextStep(3)">
                                    下一步
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-step" id="step3">
                            <div class="summary-card">
                                <h4>需求摘要</h4>
                                <div class="summary-content" id="summaryContent">
                                    <!-- 动态生成摘要 -->
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="contact">联系方式 <span class="required">*</span></label>
                                <input type="email" id="contact" name="contact" placeholder="请输入您的邮箱或电话" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-item terms-checkbox">
                                    <input type="checkbox" name="terms" required>
                                    <span class="checkmark"></span>
                                    我同意 <a href="#" class="link">服务条款</a> 和 <a href="#" class="link">隐私政策</a>
                                </label>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="prevStep(2)">
                                    <i class="fas fa-arrow-left"></i>
                                    上一步
                                </button>
                                <button type="submit" class="btn-primary btn-submit">
                                    <i class="fas fa-paper-plane"></i>
                                    提交需求
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                
                <div class="requirements-info">
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h4>快速响应</h4>
                        <p>我们承诺在24小时内响应您的需求</p>
                    </div>
                    
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>数据安全</h4>
                        <p>所有项目数据严格加密处理</p>
                    </div>
                    
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h4>技术支持</h4>
                        <p>提供一对一技术咨询服务</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 社区部分 -->
        <section id="community" class="community-section">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-comments"></i>
                    <span>AI 助手</span>
                </div>
                <h2 class="section-title">
                    <i class="fas fa-users"></i>
                    社区交流
                </h2>
                <p class="section-description">
                    与其他工程师交流经验，分享见解
                </p>
            </div>

            <div class="community-container">
                <!-- 对话助手 -->
                <div class="chat-panel" id="chatPanel">
                    <div class="chat-header">
                        <div class="chat-title">
                            <i class="fas fa-robot"></i>
                            <span>AI 设计助手</span>
                        </div>
                        <div class="chat-status">
                            <span class="status-dot online"></span>
                            在线
                        </div>
                    </div>

                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <div class="message-text">
                                    您好！我是线束设计AI助手。有什么可以帮助您的？
                                </div>
                                <div class="message-time">现在</div>
                            </div>
                        </div>
                    </div>

                    <div class="chat-loading" id="chatLoading" style="display: none;">
                        <div class="typing-indicator">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>

                    <div class="chat-input-area">
                        <div class="quick-questions">
                            <span class="quick-label">快捷问题：</span>
                            <button class="quick-question" onclick="sendQuickQuestion('如何选择合适的线径？')">如何选择合适的线径？</button>
                            <button class="quick-question" onclick="sendQuickQuestion('线束设计的基本流程是什么？')">基本流程</button>
                            <button class="quick-question" onclick="sendQuickQuestion('推荐一些学习资源')">学习资源</button>
                        </div>
                        <div class="chat-input-row">
                            <input type="text" id="chatInput" placeholder="输入您的问题..." onkeypress="handleChatKeypress(event)">
                            <button class="btn-send" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 留言评论 -->
                <div class="comments-panel">
                    <div class="comments-header">
                        <h3>用户留言</h3>
                        <div class="comments-search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="commentSearch" placeholder="搜索留言..." oninput="searchComments(this.value)">
                        </div>
                    </div>

                    <div class="comments-tabs">
                        <button class="tab-btn active" data-tab="all" onclick="filterComments('all')">全部</button>
                        <button class="tab-btn" data-tab="tech" onclick="filterComments('tech')">技术</button>
                        <button class="tab-btn" data-tab="help" onclick="filterComments('help')">求助</button>
                        <button class="tab-btn" data-tab="share" onclick="filterComments('share')">分享</button>
                    </div>

                    <div class="comments-list" id="commentsList">
                        <!-- 评论将动态加载 -->
                    </div>

                    <!-- 空状态 -->
                    <div class="empty-state" id="emptyState" style="display: none;">
                        <div class="empty-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h4>暂无留言</h4>
                        <p>成为第一个分享想法的人吧！</p>
                    </div>

                    <div class="comment-form">
                        <div class="comment-tags">
                            <span class="tag-label">话题：</span>
                            <button class="comment-tag" data-tag="tech" onclick="selectTag(this)">技术</button>
                            <button class="comment-tag" data-tag="help" onclick="selectTag(this)">求助</button>
                            <button class="comment-tag" data-tag="share" onclick="selectTag(this)">分享</button>
                            <button class="comment-tag" data-tag="other" onclick="selectTag(this)">其他</button>
                        </div>
                        <div class="comment-input-wrapper">
                            <textarea id="commentInput" placeholder="分享您的想法或提出问题..." rows="3"></textarea>
                            <button class="btn-primary" onclick="submitComment()">
                                <i class="fas fa-comment"></i>
                                发表评论
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 文档部分 -->
        <section id="docs" class="docs-section">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-code"></i>
                    <span>API v2.0</span>
                </div>
                <h2 class="section-title">
                    <i class="fas fa-book"></i>
                    开发文档
                </h2>
                <p class="section-description">
                    完整的API文档和使用指南
                </p>
            </div>
            
            <div class="docs-container">
                <div class="docs-sidebar">
                    <div class="docs-search">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="搜索文档..." id="docsSearch">
                    </div>
                    
                    <nav class="docs-nav">
                        <div class="docs-nav-section">
                            <h4>入门指南</h4>
                            <ul>
                                <li><a href="#" class="active">快速开始</a></li>
                                <li><a href="#">安装配置</a></li>
                                <li><a href="#">第一个项目</a></li>
                            </ul>
                        </div>
                        
                        <div class="docs-nav-section">
                            <h4>API 参考</h4>
                            <ul>
                                <li><a href="#">核心类库</a></li>
                                <li><a href="#">工具模块</a></li>
                                <li><a href="#">导出接口</a></li>
                            </ul>
                        </div>
                        
                        <div class="docs-nav-section">
                            <h4>示例代码</h4>
                            <ul>
                                <li><a href="#">基础示例</a></li>
                                <li><a href="#">高级用法</a></li>
                                <li><a href="#">最佳实践</a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
                
                <div class="docs-content">
                    <div class="docs-article">
                        <h1>快速开始</h1>
                        <p>欢迎使用线束大师平台！本指南将帮助您快速上手。</p>
                        
                        <h2>安装</h2>
                        <pre><code>npm install @harness/core --save</code></pre>
                        
                        <h2>基本使用</h2>
                        <pre><code><span class="keyword">import</span> { HarnessDesigner } <span class="keyword">from</span> <span class="string">'@harness/core'</span>;

<span class="keyword">const</span> designer = <span class="keyword">new</span> <span class="class-name">HarnessDesigner</span>();
designer.loadProject(<span class="string">'path/to/project'</span>);
designer.runAnalysis();</code></pre>
                        
                        <h2>下一步</h2>
                        <p>查看 <a href="#" class="link">详细文档</a> 了解更多信息。</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>产品</h4>
                    <ul>
                        <li><a href="#">功能特性</a></li>
                        <li><a href="#">定价方案</a></li>
                        <li><a href="#">更新日志</a></li>
                        <li><a href="#">路线图</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>资源</h4>
                    <ul>
                        <li><a href="#">开发文档</a></li>
                        <li><a href="#">API 参考</a></li>
                        <li><a href="#">视频教程</a></li>
                        <li><a href="#">示例项目</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>公司</h4>
                    <ul>
                        <li><a href="#">关于我们</a></li>
                        <li><a href="#">联系我们</a></li>
                        <li><a href="#">加入我们</a></li>
                        <li><a href="#">新闻动态</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>联系方式</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> 2665457630@qq.com</p>
                        <p><i class="fas fa-phone"></i> 18151860772</p>
                        <div class="social-links">
                            <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-weixin"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 线束大师. 保留所有权利.</p>
                <div class="footer-links">
                    <a href="#">隐私政策</a>
                    <a href="#">服务条款</a>
                    <a href="#">法律声明</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- 模态框 -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="customToolModal">
            <div class="modal-header">
                <h3><i class="fas fa-upload"></i> 上传自定义工具</h3>
                <button class="btn-icon" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="upload-instructions">
                    <h4>上传说明</h4>
                    <ul>
                        <li>支持单个 HTML 文件或包含 HTML、CSS、JS 的压缩包</li>
                        <li>HTML 文件需要包含完整的页面结构</li>
                        <li>可以使用 iframe 方式嵌入</li>
                        <li>文件大小限制：10MB</li>
                    </ul>
                </div>
                <div class="upload-area" id="customToolUpload">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>拖拽文件到此处或 <span class="upload-link">点击上传</span></p>
                    <input type="file" id="customToolInput" accept=".html,.zip,.rar,.7z">
                </div>
                <div class="upload-preview" id="uploadPreview"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">取消</button>
                <button class="btn-primary" onclick="uploadTool()">
                    <i class="fas fa-upload"></i>
                    上传并添加
                </button>
            </div>
        </div>
    </div>

    <!-- Toast 通知 -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="js/main.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/comments.js"></script>
</body>
</html>